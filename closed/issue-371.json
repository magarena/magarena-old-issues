{
  "status": "verified",
  "body": "...G (C): Computer draws a card.\r\nLOG (C): Computer draws a card.\r\nMMAB cheat=false index=1 life=7 phase=FirstMain slice=4000 time=4384\r\n* [85/18634/168 at 3] (pass)\r\n  [86/44698/-2065 at 5] (Rites of Flourishing)\r\n  [85/103/-1102 at 4] (Crimson Kobolds)\r\n  [86/0/-1102 at 4] (Vision Skeins)\r\nMMAB cheat=false index=1 life=7 phase=SecondMain slice=4000 time=3900\r\n  [87/4321/-3131 at 4] (pass)\r\n  [88/26023/-2268 at 5] (Rites of Flourishing)\r\n* [87/2250/-451 at 2] (Crimson Kobolds)\r\n  [87/788/-2641 at 5] (Vision Skeins)\r\nLOG (C): Play Crimson Kobolds.\r\nLOG (C): Put Crimson Kobolds onto the battlefield.\r\nMMAB cheat=false index=1 life=7 phase=SecondMain slice=8000 time=2386\r\n  [89/6735/-2720 at 5] (pass)\r\n* [90/29783/-1151 at 2] (Crimson Kobolds)\r\nLOG (C): Play Crimson Kobolds.\r\nLOG (P): Tap Island. Tap Island. Tap Island. Tap Island. Pay {3}{U}. Play Ray of Command.\r\nMMAB cheat=false index=1 life=7 phase=SecondMain slice=8000 time=1045\r\n* [91/8242/410 at 2] (pass)\r\n  [92/6494/-161 at 1] (Vision Skeins)\r\nLOG (P): Gain control of target creature (Crimson Kobolds) an opponent controls until end of turn. Untap that creature. It gains haste until end of turn.\r\nLOG (C): Put Crimson Kobolds onto the battlefield.\r\nMMAB cheat=false index=1 life=7 phase=SecondMain slice=4000 time=3526\r\n* [94/16341/90 at 2] (pass)\r\n  [95/14321/-3115 at 3] (Rites of Flourishing)\r\n  [94/45/-1889 at 3] (Vision Skeins)\r\nMMAB cheat=false index=1 life=7 phase=Cleanup slice=2000 time=2184\r\n* [96/26301/-2529 at 3] (Death's Caress)\r\n  [97/26301/-2529 at 3] (Death's Caress)\r\n  [97/3/-2629 at 4] (Otherworld Atlas)\r\n  [97/3/-2629 at 4] (Otherworld Atlas)\r\n  [96/3/-2714 at 4] (Rites of Flourishing)\r\n  [97/3/-2577 at 4] (Vision Skeins)\r\n  [96/3/-2577 at 4] (Vision Skeins)\r\n  [97/1/-2577 at 4] (Vision Skeins)\r\nLOG (C): Computer discards a card (Death's Caress).\r\nLOG (P): chulu gains X life where X is the number of cards in his or her hand minus 4.\r\nLOG (P): chulu gains X life where X is the number of cards in his or her hand minus 4.\r\nLOG (P): chulu draws a card.\r\nLOG (P): chulu draws a card.\r\nLOG (P): Tap Island. Pay {1}. Play Black Vise.\r\nMMAB cheat=false index=1 life=7 phase=FirstMain slice=8000 time=6116\r\n* [99/21330/-99900000 at 4] (pass)\r\n  [100/14726/-99900000 at 2] (Vision Skeins)\r\nLOG (P): Put Black Vise onto the battlefield.\r\nMMAB cheat=false index=1 life=7 phase=FirstMain slice=8000 time=5413\r\n* [102/5963/-99900000 at 3] (pass)\r\n  [103/14726/-99900000 at 2] (Vision Skeins)\r\nLOG (P): chulu attacks with Saprazzan Heir.\r\nMMAB cheat=false index=1 life=7 phase=DeclareBlockers slice=1333 time=1996\r\n* [104/4224/-99900000 at 2] ( Saprazzan Heir=Crimson Kobolds Saprazzan Heir=Crimson Kobolds)\r\n  [105/4224/-99900000 at 2] ( Saprazzan Heir=Crimson Kobolds Saprazzan Heir=Crimson Kobolds)\r\n  [104/792/-99900000 at 2] ( Saprazzan Heir=Crimson Kobolds Saprazzan Heir=Crimson Kobolds)\r\n  [105/792/-99900000 at 2] ( Saprazzan Heir=Crimson Kobolds Saprazzan Heir=Crimson Kobolds)\r\n  [104/0/-99900000 at 2] ( Saprazzan Heir=Crimson Kobolds Saprazzan Heir=Crimson Kobolds)\r\n  [105/0/-99900000 at 2] ( Saprazzan Heir=Crimson Kobolds Saprazzan Heir=Crimson Kobolds)\r\n  [104/366/-99900000 at 2] ( Saprazzan Heir=Crimson Kobolds)\r\n  [105/366/-99900000 at 2] ( Saprazzan Heir=Crimson Kobolds)\r\n  [105/0/-99900000 at 2] ( Saprazzan Heir=Crimson Kobolds)\r\n  [104/0/-99900000 at 2] ( Saprazzan Heir=Crimson Kobolds)\r\n  [105/0/-99900000 at 2] ( Saprazzan Heir=Crimson Kobolds)\r\n  [105/0/-99900000 at 2] ( Saprazzan Heir=Crimson Kobolds)\r\nLOG (C): Computer blocks with Crimson Kobolds.\r\nLOG (P): chulu may (yes) draw three cards.\r\nLOG (P): chulu may (yes) draw three cards.\r\nLOG (C): {c}Computer loses 1 life.\r\nLOG (C): Crimson Kobolds is destroyed. Crimson Kobolds is destroyed.\r\nLOG (P): Tap Island. Pay {U}. Play Ancestral Recall.\r\nMMAB cheat=false index=1 life=6 phase=SecondMain slice=8000 time=999\r\n* [107/2046/-99900000 at 2] (pass)\r\n  [108/1716/-99900000 at 1] (Vision Skeins)\r\nLOG (P): Target player (Computer) draws three cards.\r\nLOG (P): Tap Island. Tap Island. Pay {1}{U}. Play Ior Ruin Expedition.\r\nMMAB cheat=false index=1 life=6 phase=SecondMain slice=8000 time=499\r\n* [110/912/-99900000 at 2] (pass)\r\n  [111/792/-99900000 at 1] (Vision Skeins)\r\nLOG (P): Put Ior Ruin Expedition onto the battlefield.\r\nLOG (P): Tap Island. Tap Island. Pay {1}{U}. Play Ior Ruin Expedition.\r\nMMAB cheat=false index=1 life=6 phase=SecondMain slice=8000 time=187\r\n* [112/36/-99900000 at 1] (pass)\r\n  [113/330/-99900000 at 1] (Vision Skeins)\r\nLOG (P): Put Ior Ruin Expedition onto the battlefield.\r\nLOG (P): Play Island.\r\nMMAB cheat=false index=1 life=6 phase=SecondMain slice=8000 time=62\r\n* [114/8/-99900000 at 1] (pass)\r\n  [115/120/-99900000 at 1] (Vision Skeins)\r\nLOG (P): chulu may (yes) put a quest counter on Ior Ruin Expedition.\r\nMMAB cheat=false index=1 life=6 phase=SecondMain slice=8000 time=78\r\n* [117/8/-99900000 at 1] (pass)\r\n  [118/120/-99900000 at 1] (Vision Skeins)\r\nLOG (P): chulu may (yes) put a quest counter on Ior Ruin Expedition.\r\nMMAB cheat=false index=1 life=6 phase=SecondMain slice=8000 time=78\r\n* [119/8/-99900000 at 1] (pass)\r\n  [120/120/-99900000 at 1] (Vision Skeins)\r\nLOG (P): chulu discards a card (Island).\r\nLOG (C): {L} Computer lost the game.\r\nLOG (C): Black Vise deals X damage to Computer where X is the number of cards in his or her hand minus 4.",
  "author": "[hmarinma...@gmail.com](https://code.google.com/u/112091922902131374879/)",
  "title": "fixed? (not too classy) Bug in Black Vise text. Also implemented some cards: Ivory tower, Ray of command",
  "labels": [
    "imported",
    "Priority-Medium",
    "bug"
  ],
  "comments": [
    {
      "date": "July 18, 2013 03:03:54",
      "body": "Thanks for the fix and new cards :) A better fix for Black Vise would be to use SN (source name) instead of PN (player name), see https://code.google.com/p/magarena/source/detail?r=84bc196f3174f7b9e5c61c9c51efbf0d0f47a043 I've added the two cards in https://code.google.com/p/magarena/source/detail?r=695b4a0005f7452d08743fd336241cfe2f968f23 and https://code.google.com/p/magarena/source/detail?r=9356a39a97145f2142ad815f8198be72c0cc18e9 The issues page seems to mess with the whitespace of the code, it will be better to email the files for the cards as attachments to our mailing list, magarena@googlegroups.com\n\n**Status:** Fixed  \n",
      "author": "[melvinzh...@gmail.com](https://code.google.com/u/108278210804167927868/)"
    },
    {
      "date": "August 29, 2014 04:28:55",
      "body": "**Status:** Verified  \n",
      "author": "[ShawnieBoyUK](https://code.google.com/u/ShawnieBoyUK/)"
    }
  ],
  "content": "_From [hmarinma...@gmail.com](https://code.google.com/u/112091922902131374879/) on July 18, 2013 05:10:55_\n\nWhat steps will reproduce the problem? 1.When Black Vise is triggered, the interface shows this text: \"computer deals X damage to computer, where X is equal to the number of cards in his or her hand minus 4\"\r\n2.It shoud say: \"Black Vise deals X damage to computer where...\"\r\n3.So I replaced the first PN parameter for \"Black Vise\". It is a very poor fix, I know. \r\n4. I have also implemented Ray of Command and Ivory Tower cards. All texts and codes are listed below.\r\n\r\nMAGARENA GAME LOG\r\nCREATED ON 2013/07/17 22:39:35\r\nMAGARENA VERSION 1.39, JRE 1.7.0_25, OS Windows 7_6.1 x86\r\n\r\n\r\nLOG (P): chulu may (yes) take a mulligan. chulu may (yes) take a mulligan. chulu may (no) take a mulligan.\r\nLOG (C): Computer may (yes) take a mulligan. Computer may (yes) take a mulligan. Computer may (no) take a mulligan.\r\nMMAB cheat=false index=1 life=20 phase=FirstMain slice=4000 time=340\r\n  [24/146/2218 at 7] (pass)\r\n* [25/71/2218 at 6] (Forest)\r\n  [25/0/2218 at 6] (Ornithopter)\r\n  [25/12/2218 at 6] (Phyrexian Walker)\r\nLOG (C): Play Forest.\r\nMMAB cheat=false index=1 life=20 phase=FirstMain slice=4000 time=142\r\n* [26/74/2213 at 6] (pass)\r\n  [27/42/2213 at 6] (Ornithopter)\r\n  [27/6/2212 at 6] (Phyrexian Walker)\r\nMMAB cheat=false index=1 life=20 phase=SecondMain slice=4000 time=113\r\n  [28/63/1911 at 6] (pass)\r\n  [29/37/2212 at 6] (Ornithopter)\r\n* [29/6/2212 at 5] (Phyrexian Walker)\r\nLOG (C): Play Phyrexian Walker.\r\nLOG (C): Put Phyrexian Walker onto the battlefield.\r\nLOG (P): Play Island.\r\nLOG (P): Tap Island. Pay {1}. Play Black Vise.\r\nLOG (P): Put Black Vise onto the battlefield.\r\nLOG (C): Black Vise deals X damage to Computer where X is the number of cards in his or her hand minus 4. Please provide any additional information below. (a more detailed log is listed below)\r\n\r\nBlack Vise Groovy:\r\n\r\n[\r\n    new MagicAtUpkeepTrigger() \r\n{\r\n    @Override\r\n \r\n      public MagicEvent executeTrigger(final MagicGame game,\r\nfinal MagicPermanent permanent,\r\nfinal MagicPlayer upkeepPlayer) \r\n\t{\r\n     \r\n\t   final MagicTarget target = permanent.getChosenTarget();\r\n\r\n           return (upkeepPlayer == target) ?\r\n  \r\n\t   new MagicEvent(\r\npermanent,\r\nupkeepPlayer,\r\nthis, \"Black Vise deals X damage to PN \" +\r\n \"where X is the number of cards in his or her hand minus \r\n\r\n4.\"):MagicEvent.NONE;\r\n\r\n        }\r\n      \r\n     @Override\r\n \r\n     public void executeEvent(final MagicGame game, final MagicEvent event)\r\n\t {\r\n         \r\n\t\t   final MagicPlayer player = event.getPlayer();\r\n \r\n\t           final int amount = player.getHandSize() - 4;\r\n\r\n                   if (amount > 0) \r\n\t\t\t{\r\n               \r\n\t\t\t\t final MagicDamage damage = new MagicDamage(\r\nevent.getPermanent(),player,amount);\r\n \r\n\t\t                 game.doAction(new MagicDealDamageAction(damage));\r\n   \r\n                        }\r\n      \r\n         }\r\n   \r\n }\r\n\r\n]\r\n\r\nRay of command txt:\r\nname=Ray of Command\r\nurl= http://magiccards.info/cmd/en/56.html image= http://magiccards.info/scans/en/cmd/56.jpg value=3.900\r\nremoval=5\r\nrarity=U\r\ntype=Instant\r\ncost={3}{U}\r\ntiming=draw\r\nrequires_groovy_code\r\n\r\nRay of command groovy:\r\n[\r\n    new MagicSpellCardEvent() {\r\n        @Override\r\n        public MagicEvent getEvent(final MagicCardOnStack cardOnStack,final MagicPayedCost \r\n\r\npayedCost) {\r\n            return new MagicEvent(\r\n                cardOnStack,\r\n MagicTargetChoice.TARGET_CREATURE_YOUR_OPPONENT_CONTROLS,\r\n                \r\n\r\nMagicExileTargetPicker.create(),\r\n                this,\r\n                \"Gain control of target creature\\$ an opponent controls until end of turn. \r\n\r\nUntap that creature. \" +\r\n                \"It gains haste until end of turn.\"\r\n            );\r\n        }\r\n\r\n        @Override\r\n        public void executeEvent\r\n\r\n(final MagicGame game, final MagicEvent event) {\r\n            event.processTargetPermanent(game,new MagicPermanentAction() {\r\n                public \r\n\r\nvoid doAction(final MagicPermanent creature) {\r\n                    game.doAction(new MagicGainControlAction(event.getPlayer\r\n\r\n(),creature,MagicStatic.UntilEOT));\r\n                    game.doAction(new MagicUntapAction(creature));\r\n                    game.doAction(new \r\n\r\nMagicSetAbilityAction(creature,MagicAbility.Haste));\r\n                }\r\n            });\r\n        }\r\n    }\r\n]\r\n\r\nIvory Tower txt:\r\nname=Ivory Tower\r\nurl= http://magiccards.info/fvr/en/4.html image= http://magiccards.info/scans/en/fvr/4.jpg value=4.370\r\nrarity=R\r\ntype=Artifact\r\ncost={1}\r\ntiming=artifact\r\nrequires_groovy_code\r\n\r\nIvory Tower groovy:\r\n[\r\n    new MagicAtUpkeepTrigger() \r\n{\r\n        @Override\r\n        \r\n\t public MagicEvent executeTrigger(final MagicGame game,final MagicPermanent permanent,final MagicPlayer upkeepPlayer)\r\n\t{\r\n\r\n\t\t           return permanent.isController(upkeepPlayer) ?\r\n\r\n                           new MagicEvent(permanent,upkeepPlayer,\r\nthis,\r\n\"PN gains X life \"\r\n +\r\n \"where X is the number of cards in his or her hand minus 4.\") :\r\n MagicEvent.NONE;\r\n\r\n        }\r\n \r\n       @Override\r\n\r\n       public void executeEvent(final MagicGame game, final MagicEvent event) \r\n\t{\r\n            \r\n\t\tfinal MagicPlayer player = event.getPlayer();\r\n \r\n\t\tfinal int amount = player.getHandSize() - 4;\r\n\t\t if (amount > 0) {\r\n game.doAction(new MagicChangeLifeAction(player,amount));}\r\n\t}\r\n     \r\n\r\n }\r\n\r\n]\r\n\r\nA log detailing the three cards:\r\n\r\nMAGARENA GAME LOG\r\nCREATED ON 2013/07/17 22:58:59\r\nMAGARENA VERSION 1.39, JRE 1.7.0_25, OS Windows 7_6.1 x86\r\n\r\n\r\nLOG (P): chulu may (no) take a mulligan.\r\nLOG (C): Computer may (no) take a mulligan.\r\nLOG (P): Play Island.\r\nLOG (P): Tap Island. Pay {1}. Play Ivory Tower.\r\nLOG (P): Put Ivory Tower onto the battlefield.\r\nMMAB cheat=false index=1 life=20 phase=FirstMain slice=4000 time=1731\r\n* [24/3176/942 at 8] (pass)\r\n  [25/2086/851 at 9] (Tropical Island)\r\n  [25/1120/851 at 9] (Forest)\r\nMMAB cheat=false index=1 life=20 phase=SecondMain slice=4000 time=1778\r\n  [26/4862/690 at 6] (pass)\r\n* [27/1546/902 at 9] (Tropical Island)\r\n  [27/1147/902 at 9] (Forest)\r\nLOG (C): Play Tropical Island.\r\nLOG (P): chulu gains X life where X is the number of cards in his or her hand minus 4.\r\nLOG (P): Play Island.\r\nLOG (P): Tap Island. Pay {1}. Play Ivory Tower.\r\nLOG (P): Tap Island. Tap Island. Pay {1}{U}. Play Saprazzan Heir.\r\nLOG (P): Put Saprazzan Heir onto the battlefield.\r\nMMAB cheat=false index=1 life=20 phase=FirstMain slice=8000 time=2512\r\n  [29/3788/211 at 12] (pass)\r\n* [30/1093/211 at 11] (Forest)\r\nLOG (C): Play Forest.\r\nMMAB cheat=false index=1 life=20 phase=FirstMain slice=4000 time=562\r\n* [31/828/-92 at 11] (pass)\r\n  [32/937/-92 at 10] (Howling Mine)\r\n  [32/499/-652 at 7] (Vision Skeins)\r\nMMAB cheat=false index=1 life=20 phase=SecondMain slice=4000 time=655\r\n* [33/666/-152 at 8] (pass)\r\n  [34/1066/-212 at 10] (Howling Mine)\r\n  [34/575/-652 at 7] (Vision Skeins)\r\nLOG (P): chulu gains X life where X is the number of cards in his or her hand minus 4.\r\nLOG (P): Tap Island. Tap Island. Pay {1}{U}. Play Ior Ruin Expedition.\r\nMMAB cheat=false index=1 life=20 phase=FirstMain slice=80...\n\n_Original issue: http://code.google.com/p/magarena/issues/detail?id=371_",
  "date": "2013-07-18T05:10:55",
  "state": "closed",
  "gid": 371,
  "link": "http://code.google.com/p/magarena/issues/detail?id=371",
  "owner": ""
}
