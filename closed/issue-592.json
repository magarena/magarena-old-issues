{
  "status": "verified",
  "body": "What steps will reproduce the problem? 1. open any .dec file in a notepad-ish editor\r\n2. add an entry, a card which is not yet implemented in magarena\r\n3. start magarena and try to import said .dec file in a NEW GAME by selecting it through the New Game Deck dialog.\r\n4. magarena crashes\r\n\r\nthat being said, I had no crashes when opening the .dec file in the deck explorer, only when loading it automatically when starting a new game.\r\n\r\ngame.log:\r\nException from controller.runGame: null\r\njava.lang.NullPointerException\r\n\tat java.util.ArrayList.addAll(ArrayList.java:559)\r\n\tat magic.model.MagicDeck.setContent(MagicDeck.java:23)\r\n\tat magic.model.MagicPlayerDefinition.setDeck(MagicPlayerDefinition.java:119)\r\n\tat magic.model.MagicDuel.setDeckFromFile(MagicDuel.java:230)\r\n\tat magic.model.MagicDuel.buildDecks(MagicDuel.java:218)\r\n\tat magic.model.MagicDuel.initialize(MagicDuel.java:235)\r\n\tat magic.ui.MagicFrame.newDuel(MagicFrame.java:249)\r\n\tat magic.ui.screen.NewDuelSettingsScreen$1.actionPerformed(NewDuelSettingsScreen.java:69)\r\n\tat javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)\r\n\tat javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)\r\n\tat javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)\r\n\tat javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)\r\n\tat javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)\r\n\tat java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:289)\r\n\tat java.awt.Component.processMouseEvent(Component.java:6505)\r\n\tat javax.swing.JComponent.processMouseEvent(JComponent.java:3311)\r\n\tat java.awt.Component.processEvent(Component.java:6270)\r\n\tat java.awt.Container.processEvent(Container.java:2229)\r\n\tat java.awt.Component.dispatchEventImpl(Component.java:4861)\r\n\tat java.awt.Container.dispatchEventImpl(Container.java:2287)\r\n\tat java.awt.Component.dispatchEvent(Component.java:4687)\r\n\tat java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)\r\n\tat java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)\r\n\tat java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)\r\n\tat java.awt.Container.dispatchEventImpl(Container.java:2273)\r\n\tat java.awt.Window.dispatchEventImpl(Window.java:2719)\r\n\tat java.awt.Component.dispatchEvent(Component.java:4687)\r\n\tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:735)\r\n\tat java.awt.EventQueue.access$200(EventQueue.java:103)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:694)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:692)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)\r\n\tat java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)\r\n\tat java.awt.EventQueue$4.run(EventQueue.java:708)\r\n\tat java.awt.EventQueue$4.run(EventQueue.java:706)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)\r\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:705)\r\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)\r\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)\r\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)\r\n\tat java.awt.EventDispatchThread.run(EventDispatchThread.java:91)\r\n\r\nwould be nice, if someone could catch that exception there, too.",
  "author": "[Landhotel.Westerwald](https://code.google.com/u/Landhotel.Westerwald/)",
  "title": "Enhancement Request: non-existing card entries in a .dec file crash magarena",
  "labels": [
    "imported",
    "Component-UI",
    "Priority-High",
    "bug"
  ],
  "comments": [
    {
      "date": "April 23, 2014 09:58:08",
      "body": "Why would someone manually update a dec file with an unimplemented card? And then try to use it in Magarena? And not expect a crash? ;)\r\n\r\nThat being said, because the dec files are human readable there is always going to be the chance that someone might think to have a play around in notepad so for robustness probably need to program defensively just in case. So,\r\n\r\n- need to check that decks are legal clicking on clicking Next in NewDuelSettingsScreen. If not, then prevent progress to next screen.\r\n- don't memorize deck in Deck Editor if it fails the legality check otherwise you get an invalid deck warning each time you open the editor.\n\n**Status:** Accepted  \n  **Labels:** Component-UI  \n",
      "author": "[lodici123](https://code.google.com/u/lodici123/)"
    },
    {
      "date": "April 23, 2014 10:07:16",
      "body": "As to why: I was trying to implement a card. Put that card into a dec. Set the preference to load it automatically on a new game. Found out, that it wasn't working like I would like it to be. Cut and pasted the card into my personal TODO folder. Next time I started a new game it crashed. Then I tried loading the same incomplete deck with the deck explorer, got me an error message but no crash. Thought that might be worth mentioning ;)",
      "author": "[Landhotel.Westerwald](https://code.google.com/u/Landhotel.Westerwald/)"
    },
    {
      "date": "June 03, 2014 12:25:51",
      "body": "**Labels:** -Priority-Medium Priority-High  \n",
      "author": "[lodici123](https://code.google.com/u/lodici123/)"
    },
    {
      "date": "July 26, 2014 12:09:16",
      "body": "fixed in 1.52. You can still select the invalid deck but it will prevent you from starting a new duel until both decks are valid.\n\n**Status:** Fixed  \n",
      "author": "[lodici123](https://code.google.com/u/lodici123/)"
    },
    {
      "date": "August 29, 2014 04:29:37",
      "body": "**Status:** Verified  \n",
      "author": "[ShawnieBoyUK](https://code.google.com/u/ShawnieBoyUK/)"
    }
  ],
  "content": "_From [Landhotel.Westerwald](https://code.google.com/u/Landhotel.Westerwald/) on April 23, 2014 22:04:10_\n\nWhat steps will reproduce the problem? 1. open any .dec file in a notepad-ish editor\r\n2. add an entry, a card which is not yet implemented in magarena\r\n3. start magarena and try to import said .dec file in a NEW GAME by selecting it through the New Game Deck dialog.\r\n4. magarena crashes\r\n\r\nthat being said, I had no crashes when opening the .dec file in the deck explorer, only when loading it automatically when starting a new game.\r\n\r\ngame.log:\r\nException from controller.runGame: null\r\njava.lang.NullPointerException\r\n\tat java.util.ArrayList.addAll(ArrayList.java:559)\r\n\tat magic.model.MagicDeck.setContent(MagicDeck.java:23)\r\n\tat magic.model.MagicPlayerDefinition.setDeck(MagicPlayerDefinition.java:119)\r\n\tat magic.model.MagicDuel.setDeckFromFile(MagicDuel.java:230)\r\n\tat magic.model.MagicDuel.buildDecks(MagicDuel.java:218)\r\n\tat magic.model.MagicDuel.initialize(MagicDuel.java:235)\r\n\tat magic.ui.MagicFrame.newDuel(MagicFrame.java:249)\r\n\tat magic.ui.screen.NewDuelSettingsScreen$1.actionPerformed(NewDuelSettingsScreen.java:69)\r\n\tat javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)\r\n\tat javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)\r\n\tat javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)\r\n\tat javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)\r\n\tat javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)\r\n\tat java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:289)\r\n\tat java.awt.Component.processMouseEvent(Component.java:6505)\r\n\tat javax.swing.JComponent.processMouseEvent(JComponent.java:3311)\r\n\tat java.awt.Component.processEvent(Component.java:6270)\r\n\tat java.awt.Container.processEvent(Container.java:2229)\r\n\tat java.awt.Component.dispatchEventImpl(Component.java:4861)\r\n\tat java.awt.Container.dispatchEventImpl(Container.java:2287)\r\n\tat java.awt.Component.dispatchEvent(Component.java:4687)\r\n\tat java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)\r\n\tat java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)\r\n\tat java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)\r\n\tat java.awt.Container.dispatchEventImpl(Container.java:2273)\r\n\tat java.awt.Window.dispatchEventImpl(Window.java:2719)\r\n\tat java.awt.Component.dispatchEvent(Component.java:4687)\r\n\tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:735)\r\n\tat java.awt.EventQueue.access$200(EventQueue.java:103)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:694)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:692)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)\r\n\tat java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)\r\n\tat java.awt.EventQueue$4.run(EventQueue.java:708)\r\n\tat java.awt.EventQueue$4.run(EventQueue.java:706)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)\r\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:705)\r\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)\r\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)\r\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)\r\n\tat java.awt.EventDispatchThread.run(EventDispatchThread.java:91)\r\n\r\nwould be nice, if someone could catch that exception there, too.\n\n_Original issue: http://code.google.com/p/magarena/issues/detail?id=592_",
  "date": "2014-04-23T22:04:10",
  "state": "closed",
  "gid": 592,
  "link": "http://code.google.com/p/magarena/issues/detail?id=592",
  "owner": ""
}
